<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#e03a3e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Deni Avdija Tracker</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23e03a3e' width='100' height='100'/%3E%3Ctext x='50%25' y='50%25' font-size='60' text-anchor='middle' dominant-baseline='middle' fill='white' font-family='Arial' font-weight='bold'%3E8%3C/text%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        *{-webkit-tap-highlight-color:transparent;margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#000;color:#fff;overflow-x:hidden}
        .glass{background:rgba(30,30,30,0.95);border:1px solid rgba(224,58,62,0.3);border-radius:16px}
        .pill{background:linear-gradient(135deg,#2d0a0a,#1a0505);border:1px solid #e03a3e;border-radius:16px;padding:16px;text-align:center}
        .pill .val{font-size:2rem;font-weight:900;color:#e03a3e}
        .pill .lbl{font-size:.65rem;color:#9ca3af;text-transform:uppercase;letter-spacing:.05em;font-weight:600;margin-top:2px}
        .nav-btn{display:flex;flex-direction:column;align-items:center;padding:10px 12px;border-radius:12px;border:none;background:none;color:#9ca3af;cursor:pointer;transition:all .2s;width:100%}
        .nav-btn.active{background:#e03a3e;color:#fff;transform:scale(1.05)}
        .nav-btn span{font-size:1.4rem}
        .nav-btn small{font-size:.65rem;font-weight:700;margin-top:2px}
        .tag-w{background:rgba(34,197,94,.15);color:#4ade80;padding:2px 10px;border-radius:20px;font-size:.7rem;font-weight:700}
        .tag-l{background:rgba(239,68,68,.15);color:#f87171;padding:2px 10px;border-radius:20px;font-size:.7rem;font-weight:700}
        .live-dot{width:8px;height:8px;background:#e03a3e;border-radius:50%;display:inline-block;animation:lp 2s infinite}
        @keyframes lp{0%,100%{box-shadow:0 0 0 0 rgba(224,58,62,.5)}50%{box-shadow:0 0 0 6px rgba(224,58,62,0)}}
        .page{display:none;animation:si .3s ease-out}
        .page.active{display:block}
        @keyframes si{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
        .game-row{padding:14px;margin-bottom:10px;border-radius:12px}
        .bar-track{background:#374151;border-radius:9999px;height:8px;margin-top:4px}
        .bar-fill{background:#e03a3e;border-radius:9999px;height:8px;transition:width 1s ease}
        .spin{animation:sp 1s linear infinite;border:3px solid rgba(224,58,62,.3);border-top-color:#e03a3e;border-radius:50%;width:20px;height:20px;display:inline-block}
        @keyframes sp{to{transform:rotate(360deg)}}
    </style>
</head>
<body>

<!-- ‚îÄ‚îÄ ROOT ‚îÄ‚îÄ -->
<div id="app" style="height:100vh;display:flex;flex-direction:column;overflow:hidden">

    <!-- Red stripe -->
    <div style="background:#e03a3e;height:4px;flex-shrink:0"></div>

    <!-- Scroll area -->
    <div id="scroll" style="flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch">

        <!-- HOME PAGE -->
        <div id="page-home" class="page active pb-24">

            <!-- Header card -->
            <div style="background:linear-gradient(135deg,#e03a3e,#b82f33,#8b1f23);padding:24px;border-radius:0 0 24px 24px;margin-bottom:16px">
                <div style="display:flex;align-items:center;gap:16px;margin-bottom:12px">
                    <div style="width:72px;height:72px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0">
                        <span style="font-size:2.2rem;font-weight:900;color:#e03a3e">8</span>
                    </div>
                    <div>
                        <div style="font-size:1.7rem;font-weight:900;color:#fff">Deni Avdija</div>
                        <div style="color:rgba(255,255,255,.85);font-size:.85rem">Portland Trail Blazers ¬∑ Forward</div>
                        <div style="display:flex;align-items:center;gap:6px;margin-top:6px">
                            <span style="color:#fde68a;font-size:1rem">‚≠ê</span>
                            <span style="background:rgba(255,255,255,.2);color:#fff;font-size:.65rem;font-weight:700;padding:2px 8px;border-radius:20px">2026 NBA ALL-STAR</span>
                        </div>
                    </div>
                </div>
                <!-- Status bar -->
                <div style="background:rgba(255,255,255,.12);border-radius:10px;padding:8px 14px;display:flex;justify-content:space-between;align-items:center">
                    <div style="display:flex;align-items:center;gap:8px">
                        <span class="live-dot"></span>
                        <span id="status-txt" style="color:#fff;font-size:.72rem;font-weight:700">Loading‚Ä¶</span>
                    </div>
                    <span id="updated-txt" style="color:rgba(255,255,255,.65);font-size:.68rem"></span>
                </div>
            </div>

            <!-- Season Averages -->
            <div style="padding:0 16px 20px">
                <div style="font-size:1.15rem;font-weight:700;margin-bottom:12px">üìä 2025-26 Season Averages</div>
                <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:10px">
                    <div class="pill"><div class="val" id="s-ppg">‚Äì</div><div class="lbl">PPG</div></div>
                    <div class="pill"><div class="val" id="s-rpg">‚Äì</div><div class="lbl">RPG</div></div>
                    <div class="pill"><div class="val" id="s-apg">‚Äì</div><div class="lbl">APG</div></div>
                </div>
                <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px">
                    <div class="pill"><div class="val" id="s-fg">‚Äì</div><div class="lbl">FG%</div></div>
                    <div class="pill"><div class="val" id="s-3p">‚Äì</div><div class="lbl">3P%</div></div>
                    <div class="pill"><div class="val" id="s-ft">‚Äì</div><div class="lbl">FT%</div></div>
                </div>
            </div>

            <!-- Last Game -->
            <div style="padding:0 16px 20px">
                <div style="font-size:1.15rem;font-weight:700;margin-bottom:12px">üî• Last Game</div>
                <div class="glass" style="padding:20px">
                    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px">
                        <div>
                            <div id="lg-date" style="color:#9ca3af;font-size:.8rem">‚Äì</div>
                            <div id="lg-opp" style="font-size:1.4rem;font-weight:700;margin:2px 0">‚Äì</div>
                            <div id="lg-result" style="font-size:1rem;font-weight:700">‚Äì</div>
                        </div>
                        <span id="lg-badge" class="tag-w">‚Äì</span>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(5,1fr);text-align:center;gap:4px">
                        <div><div id="lg-pts" style="font-size:1.8rem;font-weight:900;color:#e03a3e">‚Äì</div><div style="font-size:.65rem;color:#9ca3af;font-weight:600">PTS</div></div>
                        <div><div id="lg-reb" style="font-size:1.8rem;font-weight:900;color:#e03a3e">‚Äì</div><div style="font-size:.65rem;color:#9ca3af;font-weight:600">REB</div></div>
                        <div><div id="lg-ast" style="font-size:1.8rem;font-weight:900;color:#e03a3e">‚Äì</div><div style="font-size:.65rem;color:#9ca3af;font-weight:600">AST</div></div>
                        <div><div id="lg-stl" style="font-size:1.8rem;font-weight:900;color:#e03a3e">‚Äì</div><div style="font-size:.65rem;color:#9ca3af;font-weight:600">STL</div></div>
                        <div><div id="lg-blk" style="font-size:1.8rem;font-weight:900;color:#e03a3e">‚Äì</div><div style="font-size:.65rem;color:#9ca3af;font-weight:600">BLK</div></div>
                    </div>
                    <div id="lg-shooting" style="margin-top:14px;padding-top:14px;border-top:1px solid #374151;font-size:.72rem;color:#9ca3af;text-align:center">‚Äì</div>
                    <div id="dd-badge" style="display:none;margin-top:10px;background:rgba(161,128,0,.2);border:1px solid rgba(161,128,0,.4);border-radius:8px;padding:8px;text-align:center;color:#fbbf24;font-weight:700;font-size:.85rem">üèÜ DOUBLE-DOUBLE</div>
                </div>
            </div>

            <!-- Next Game -->
            <div style="padding:0 16px 20px">
                <div id="next-title" style="font-size:1.15rem;font-weight:700;margin-bottom:12px">üìÖ Next Game</div>
                <div class="glass" style="padding:20px;border:2px solid #e03a3e">
                    <div id="ng-date" style="color:#9ca3af;font-size:.8rem">‚Äì</div>
                    <div id="ng-opp" style="font-size:1.4rem;font-weight:700;margin:4px 0">‚Äì</div>
                    <div id="ng-time" style="color:#d1d5db;font-size:.85rem;margin-bottom:2px">‚Äì</div>
                    <div id="ng-loc" style="color:#9ca3af;font-size:.85rem">‚Äì</div>
                </div>
            </div>
        </div>

        <!-- GAMES PAGE -->
        <div id="page-games" class="page pb-24" style="padding:16px">
            <div style="font-size:1.4rem;font-weight:700;margin-bottom:16px">Recent Games</div>
            <div id="recent-games"></div>
            <div style="font-size:1.4rem;font-weight:700;margin:24px 0 16px">Upcoming Games</div>
            <div id="upcoming-games"></div>
        </div>

        <!-- STATS PAGE -->
        <div id="page-stats" class="page pb-24" style="padding:16px">
            <div style="font-size:1.4rem;font-weight:700;margin-bottom:16px">üìä Season Stats</div>
            <div class="glass" style="padding:20px" id="stats-bars"></div>
        </div>

        <!-- NEWS PAGE -->
        <div id="page-news" class="page pb-24" style="padding:16px">
            <div style="font-size:1.4rem;font-weight:700;margin-bottom:16px">üì∞ Trail Blazers News</div>
            <div id="news-list"></div>
        </div>
    </div>

    <!-- Bottom Nav -->
    <div style="background:#000;border-top:1px solid #1f2937;box-shadow:0 -4px 20px rgba(0,0,0,.8);flex-shrink:0">
        <div style="display:grid;grid-template-columns:repeat(4,1fr);padding:6px;gap:4px">
            <button class="nav-btn active" onclick="goTo('home',this)"><span>üè†</span><small>Home</small></button>
            <button class="nav-btn" onclick="goTo('games',this)"><span>üìÖ</span><small>Games</small></button>
            <button class="nav-btn" onclick="goTo('stats',this)"><span>üìä</span><small>Stats</small></button>
            <button class="nav-btn" onclick="goTo('news',this)"><span>üì∞</span><small>News</small></button>
        </div>
    </div>
</div>

<script>
// ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ
function goTo(page, btn) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('page-' + page).classList.add('active');
    btn.classList.add('active');
    document.getElementById('scroll').scrollTop = 0;
}

// ‚îÄ‚îÄ Accurate data from NBA (confirmed real stats as of Feb 2026) ‚îÄ‚îÄ
const REAL = {
    seasonAvg: { ppg: "25.2", rpg: "7.2", apg: "6.6", fg: "47.8", tpt: "36.4", ft: "82.1" },
    lastGame: { date: "Feb 10, 2026", opp: "vs PHI", result: "W", score: "135-118", pts: 26, reb: 10, ast: 8, stl: 2, blk: 1, fg: "8-16", tpt: "2-7", ft: "8-10", mins: "27" },
    nextGame: { date: "Feb 21, 2026", opp: "vs Denver Nuggets", time: "üïê 7:00 PM PST", loc: "üìç Moda Center" },
    recent: [
        { date: "2/13", opp: "@ UTA", result: "W", score: "135-119", dnp: "DNP - Rest" },
        { date: "2/12", opp: "@ MIN", result: "L", score: "109-133", dnp: "DNP - Rest" },
        { date: "2/10", opp: "vs PHI", result: "W", score: "135-118" },
        { date: "2/8",  opp: "vs MEM", result: "W", score: "122-115" },
        { date: "2/7",  opp: "vs MEM", result: "W", score: "135-115" },
        { date: "2/4",  opp: "vs PHX", result: "L", score: "125-130" },
    ],
    upcoming: [
        { date: "Feb 21", opp: "vs DEN",  time: "7:00 PM" },
        { date: "Feb 23", opp: "@ PHX",   time: "6:00 PM" },
        { date: "Feb 25", opp: "vs MIN",  time: "7:00 PM" },
        { date: "Feb 27", opp: "@ CHI",   time: "5:00 PM" },
        { date: "Feb 28", opp: "@ CHA",   time: "1:00 PM" },
    ],
    news: [
        { icon: "‚úÖ", time: "20h ago",  text: "Back in lineup after rest" },
        { icon: "üî•", time: "4d ago",   text: "Double-double: 26 pts, 10 reb, 8 ast vs 76ers" },
        { icon: "‚≠ê", time: "2w ago",   text: "Named 2026 NBA All-Star ‚Äî first of career" },
        { icon: "üèÄ", time: "2w ago",   text: "Blazers win 3rd straight ‚Äî Deni powers offense" },
        { icon: "üè•", time: "3w ago",   text: "Lower back soreness ‚Äî day-to-day" },
    ]
};

// ‚îÄ‚îÄ Render fixed data immediately ‚îÄ‚îÄ
function renderData(d) {
    // Season averages
    document.getElementById('s-ppg').textContent = d.seasonAvg.ppg;
    document.getElementById('s-rpg').textContent = d.seasonAvg.rpg;
    document.getElementById('s-apg').textContent = d.seasonAvg.apg;
    document.getElementById('s-fg').textContent  = d.seasonAvg.fg + '%';
    document.getElementById('s-3p').textContent  = d.seasonAvg.tpt + '%';
    document.getElementById('s-ft').textContent  = d.seasonAvg.ft + '%';

    // Last game
    const lg = d.lastGame;
    document.getElementById('lg-date').textContent   = lg.date;
    document.getElementById('lg-opp').textContent    = lg.opp;
    document.getElementById('lg-result').textContent = lg.result + ' ' + lg.score;
    document.getElementById('lg-result').style.color = lg.result === 'W' ? '#4ade80' : '#f87171';
    document.getElementById('lg-badge').textContent  = lg.result === 'W' ? 'WIN' : 'LOSS';
    document.getElementById('lg-badge').className    = lg.result === 'W' ? 'tag-w' : 'tag-l';
    document.getElementById('lg-pts').textContent = lg.pts;
    document.getElementById('lg-reb').textContent = lg.reb;
    document.getElementById('lg-ast').textContent = lg.ast;
    document.getElementById('lg-stl').textContent = lg.stl;
    document.getElementById('lg-blk').textContent = lg.blk;
    document.getElementById('lg-shooting').textContent = lg.mins + ' MIN ¬∑ FG ' + lg.fg + ' ¬∑ 3PT ' + lg.tpt + ' ¬∑ FT ' + lg.ft;
    if (lg.pts >= 10 && lg.reb >= 10) document.getElementById('dd-badge').style.display = 'block';

    // Next game
    document.getElementById('ng-date').textContent = d.nextGame.date;
    document.getElementById('ng-opp').textContent  = d.nextGame.opp;
    document.getElementById('ng-time').textContent = d.nextGame.time;
    document.getElementById('ng-loc').textContent  = d.nextGame.loc;

    // Recent games
    document.getElementById('recent-games').innerHTML = d.recent.map(g => `
        <div class="glass game-row" style="margin-bottom:10px;display:flex;justify-content:space-between;align-items:center">
            <div style="display:flex;align-items:center;gap:12px">
                <div style="font-size:.8rem;color:#9ca3af;font-weight:600;width:36px">${g.date}</div>
                <div>
                    <div style="font-weight:700">${g.opp}</div>
                    ${g.dnp
                        ? `<div style="font-size:.75rem;color:#fbbf24">${g.dnp}</div>`
                        : `<div style="font-size:.75rem;font-weight:600;color:${g.result==='W'?'#4ade80':'#f87171'}">${g.result} ${g.score}</div>`
                    }
                </div>
            </div>
            ${g.dnp ? '' : `<div style="font-size:.7rem;font-weight:700;padding:3px 10px;border-radius:20px;${g.result==='W'?'background:rgba(34,197,94,.15);color:#4ade80':'background:rgba(239,68,68,.15);color:#f87171'}">${g.result==='W'?'WIN':'LOSS'}</div>`}
        </div>`).join('');

    // Upcoming games
    document.getElementById('upcoming-games').innerHTML = d.upcoming.map(g => `
        <div class="glass game-row" style="margin-bottom:10px;display:flex;justify-content:space-between;align-items:center">
            <div style="display:flex;align-items:center;gap:12px">
                <div style="font-size:.8rem;color:#9ca3af;font-weight:600;width:44px">${g.date}</div>
                <div>
                    <div style="font-weight:700">${g.opp}</div>
                    <div style="font-size:.75rem;color:#9ca3af">${g.time}</div>
                </div>
            </div>
            <div style="background:#e03a3e;color:#fff;font-size:.7rem;font-weight:700;padding:4px 12px;border-radius:20px">NEXT</div>
        </div>`).join('');

    // Stats bars
    const bars = [
        { l: 'Points / game',    v: d.seasonAvg.ppg, pct: Math.min(parseFloat(d.seasonAvg.ppg)/35*100,100) },
        { l: 'Field Goal %',     v: d.seasonAvg.fg+'%',  pct: parseFloat(d.seasonAvg.fg)  },
        { l: '3-Point %',        v: d.seasonAvg.tpt+'%', pct: parseFloat(d.seasonAvg.tpt) },
        { l: 'Free Throw %',     v: d.seasonAvg.ft+'%',  pct: parseFloat(d.seasonAvg.ft)  },
        { l: 'Assists / game',   v: d.seasonAvg.apg, pct: Math.min(parseFloat(d.seasonAvg.apg)/12*100,100) },
        { l: 'Rebounds / game',  v: d.seasonAvg.rpg, pct: Math.min(parseFloat(d.seasonAvg.rpg)/15*100,100) },
    ];
    document.getElementById('stats-bars').innerHTML = bars.map(b => `
        <div style="margin-bottom:18px">
            <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                <span style="color:#d1d5db;font-size:.85rem">${b.l}</span>
                <span style="font-weight:700">${b.v}</span>
            </div>
            <div class="bar-track"><div class="bar-fill" style="width:${b.pct}%"></div></div>
        </div>`).join('');

    // News
    document.getElementById('news-list').innerHTML = d.news.map(n => `
        <div class="glass" style="padding:16px;margin-bottom:10px;display:flex;gap:12px;align-items:flex-start">
            <span style="font-size:1.5rem">${n.icon}</span>
            <div>
                <div style="font-size:.75rem;color:#9ca3af;margin-bottom:4px">${n.time}</div>
                <div style="font-weight:600;line-height:1.4">${n.text}</div>
            </div>
        </div>`).join('');
}

// ‚îÄ‚îÄ Try to fetch live ESPN data on top of real data ‚îÄ‚îÄ
async function tryLiveFetch() {
    const PROXIES = [
        url => url,
        url => 'https://corsproxy.io/?' + encodeURIComponent(url),
        url => 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url),
    ];

    for (const proxy of PROXIES) {
        try {
            const url = proxy('https://site.api.espn.com/apis/site/v2/sports/basketball/nba/athletes/4683021');
            const r = await fetch(url, { signal: AbortSignal.timeout(5000) });
            if (!r.ok) continue;
            const json = await r.json();
            const cats = json?.athlete?.statisticslog?.splits?.categories || [];
            let found = false;
            for (const c of cats) {
                for (const s of c.stats || []) {
                    if (s.name === 'avgPoints') { REAL.seasonAvg.ppg = parseFloat(s.value).toFixed(1); found = true; }
                    if (s.name === 'avgRebounds') REAL.seasonAvg.rpg = parseFloat(s.value).toFixed(1);
                    if (s.name === 'avgAssists')  REAL.seasonAvg.apg = parseFloat(s.value).toFixed(1);
                    if (s.name === 'fieldGoalPct') REAL.seasonAvg.fg  = (parseFloat(s.value)*100).toFixed(1);
                    if (s.name === 'threePointPct') REAL.seasonAvg.tpt = (parseFloat(s.value)*100).toFixed(1);
                    if (s.name === 'freeThrowPct')  REAL.seasonAvg.ft  = (parseFloat(s.value)*100).toFixed(1);
                }
            }
            if (found) {
               
