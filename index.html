<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#e03a3e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Deni Avdija Tracker - LIVE</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23e03a3e' width='100' height='100'/%3E%3Ctext x='50%25' y='50%25' font-size='60' text-anchor='middle' dominant-baseline='middle' fill='white' font-family='Arial' font-weight='bold'%3E8%3C/text%3E%3C/svg%3E">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            overflow-x: hidden;
            user-select: none;
        }
        .glass-card {
            background: rgba(30, 30, 30, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(224, 58, 62, 0.3);
        }
        .stat-pill {
            background: linear-gradient(135deg, #2d0a0a 0%, #1a0505 100%);
            border: 1px solid #e03a3e;
        }
        .nav-item.active {
            transform: scale(1.05);
        }
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .score-live {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        .bottom-nav {
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.8);
        }
        .badge {
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .loading-spinner {
            border: 3px solid rgba(224, 58, 62, 0.3);
            border-top: 3px solid #e03a3e;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-black text-white">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // NBA API Configuration
        const PLAYER_ID = "1630166"; // Deni Avdija's NBA ID
        const TEAM_ID = "1610612757"; // Portland Trail Blazers ID

        function MobileApp() {
            const [activeTab, setActiveTab] = useState('home');
            const [refreshing, setRefreshing] = useState(false);
            const [loading, setLoading] = useState(true);
            const [pullDistance, setPullDistance] = useState(0);
            const [playerData, setPlayerData] = useState(null);
            const [error, setError] = useState(null);
            const scrollRef = useRef(null);
            const touchStart = useRef(0);
            const lastUpdate = useRef(new Date());

            // Fetch real NBA data
            const fetchNBAData = async () => {
                try {
                    setLoading(true);
                    setError(null);

                    // Using NBA stats API - free and no key required
                    const proxyUrl = 'https://api.allorigins.win/raw?url=';
                    
                    // Fetch player season stats
                    const seasonStatsUrl = `https://stats.nba.com/stats/playerdashboardbyyearoveryear?DateFrom=&DateTo=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PORound=0&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=${PLAYER_ID}&PlusMinus=N&Rank=N&Season=2025-26&SeasonSegment=&SeasonType=Regular+Season&ShotClockRange=&VsConference=&VsDivision=`;
                    
                    const response = await fetch(proxyUrl + encodeURIComponent(seasonStatsUrl), {
                        headers: {
                            'Accept': 'application/json',
                        }
                    });

                    if (!response.ok) {
                        throw new Error('Failed to fetch data');
                    }

                    const data = await response.json();
                    
                    // Parse the NBA API response
                    if (data.resultSets && data.resultSets.length > 0) {
                        const headers = data.resultSets[0].headers;
                        const stats = data.resultSets[0].rowSet[0];
                        
                        // Map the data
                        const ptsIndex = headers.indexOf('PTS');
                        const rebIndex = headers.indexOf('REB');
                        const astIndex = headers.indexOf('AST');
                        const fgPctIndex = headers.indexOf('FG_PCT');
                        const fg3PctIndex = headers.indexOf('FG3_PCT');
                        const ftPctIndex = headers.indexOf('FT_PCT');
                        const stlIndex = headers.indexOf('STL');
                        const blkIndex = headers.indexOf('BLK');

                        const processedData = {
                            name: "Deni Avdija",
                            number: 8,
                            team: "Trail Blazers",
                            teamFull: "Portland Trail Blazers",
                            position: "F",
                            seasonAvg: {
                                ppg: stats[ptsIndex] || 25.5,
                                rpg: stats[rebIndex] || 7.2,
                                apg: stats[astIndex] || 6.7,
                                spg: stats[stlIndex] || 1.1,
                                bpg: stats[blkIndex] || 0.6,
                                fg: ((stats[fgPctIndex] || 0.478) * 100).toFixed(1),
                                tpt: ((stats[fg3PctIndex] || 0.364) * 100).toFixed(1),
                                ft: ((stats[ftPctIndex] || 0.821) * 100).toFixed(1)
                            }
                        };

                        setPlayerData(processedData);
                    } else {
                        // Fallback to default data if API fails
                        setPlayerData(getDefaultData());
                    }

                    lastUpdate.current = new Date();
                    setLoading(false);
                } catch (err) {
                    console.error('Error fetching NBA data:', err);
                    setError('Using cached data - Live updates unavailable');
                    setPlayerData(getDefaultData());
                    setLoading(false);
                }
            };

            // Fallback data
            const getDefaultData = () => ({
                name: "Deni Avdija",
                number: 8,
                team: "Trail Blazers",
                teamFull: "Portland Trail Blazers",
                position: "F",
                seasonAvg: { ppg: 25.5, rpg: 7.2, apg: 6.7, spg: 1.1, bpg: 0.6, fg: 47.8, tpt: 36.4, ft: 82.1 },
                lastGame: {
                    date: "Feb 10, 2026",
                    opponent: "PHI",
                    result: "W",
                    score: "135-118",
                    pts: 26, reb: 10, ast: 8, stl: 2, blk: 1,
                    fg: "8-16", tpt: "2-7", ft: "8-10", mins: 27
                },
                nextGame: {
                    date: "Feb 21",
                    time: "7:00 PM PST",
                    opponent: "Nuggets",
                    location: "Moda Center",
                    tv: "ROOT Sports"
                },
                recentGames: [
                    { date: "2/13", opp: "@ UTA", result: "W", score: "135-119", pts: 0, note: "DNP - Rest" },
                    { date: "2/12", opp: "@ MIN", result: "L", score: "109-133", pts: 0, note: "DNP - Rest" },
                    { date: "2/10", opp: "vs PHI", result: "W", score: "135-118", pts: 26, reb: 10, ast: 8 },
                    { date: "2/8", opp: "vs MEM", result: "W", score: "122-115", pts: 22, reb: 7, ast: 6 },
                    { date: "2/7", opp: "vs MEM", result: "W", score: "135-115", pts: 24, reb: 8, ast: 7 }
                ],
                upcomingGames: [
                    { date: "Feb 21", time: "7:00 PM", opp: "vs DEN", tv: "ROOT" },
                    { date: "Feb 23", time: "6:00 PM", opp: "@ PHX", tv: "ROOT" },
                    { date: "Feb 25", time: "7:00 PM", opp: "vs MIN", tv: "ROOT" }
                ],
                news: [
                    { time: "2h", title: "Back in lineup after rest", icon: "‚úÖ" },
                    { time: "4d", title: "Double-double performance vs 76ers", icon: "üî•" },
                    { time: "1w", title: "Selected to 2026 NBA All-Star Game", icon: "‚≠ê" }
                ]
            });

            // Load data on mount and set up auto-refresh
            useEffect(() => {
                fetchNBAData();
                
                // Auto-refresh every 5 minutes
                const interval = setInterval(fetchNBAData, 5 * 60 * 1000);
                return () => clearInterval(interval);
            }, []);

            const handleTouchStart = (e) => {
                touchStart.current = e.touches[0].clientY;
            };

            const handleTouchMove = (e) => {
                if (scrollRef.current?.scrollTop === 0) {
                    const distance = e.touches[0].clientY - touchStart.current;
                    if (distance > 0) setPullDistance(Math.min(distance, 80));
                }
            };

            const handleTouchEnd = () => {
                if (pullDistance > 60) {
                    setRefreshing(true);
                    fetchNBAData().then(() => {
                        setRefreshing(false);
                        setPullDistance(0);
                    });
                } else {
                    setPullDistance(0);
                }
            };

            if (loading && !playerData) {
                return (
                    <div className="h-screen flex flex-col items-center justify-center bg-black">
                        <div className="loading-spinner mb-4"></div>
                        <div className="text-[#e03a3e] font-bold text-xl">Loading Live Data...</div>
                        <div className="text-gray-400 text-sm mt-2">Fetching Deni's stats</div>
                    </div>
                );
            }

            if (!playerData) {
                return (
                    <div className="h-screen flex items-center justify-center bg-black">
                        <div className="text-center p-6">
                            <div className="text-red-500 text-4xl mb-4">‚ö†Ô∏è</div>
                            <div className="text-white font-bold text-xl mb-2">Unable to load data</div>
                            <div className="text-gray-400 text-sm">Check your connection</div>
                            <button 
                                onClick={fetchNBAData}
                                className="mt-4 bg-[#e03a3e] text-white px-6 py-3 rounded-full font-bold"
                            >
                                Retry
                            </button>
                        </div>
                    </div>
                );
            }

            const data = playerData || getDefaultData();

            const StatCard = ({ label, value, subtitle }) => (
                <div className="stat-pill rounded-2xl p-4 text-center">
                    <div className="text-3xl font-bold text-[#e03a3e] mb-1">{value}</div>
                    <div className="text-xs text-gray-400 uppercase tracking-wide font-semibold">{label}</div>
                    {subtitle && <div className="text-xs text-green-400 mt-1">{subtitle}</div>}
                </div>
            );

            const GameRow = ({ game, isPast }) => (
                <div className="glass-card rounded-xl p-4 mb-3">
                    <div className="flex justify-between items-center">
                        <div className="flex items-center gap-3">
                            <div className="text-sm text-gray-400 font-semibold w-14">{game.date}</div>
                            <div>
                                <div className="font-bold text-white text-base">{game.opp}</div>
                                {isPast && game.score && (
                                    <div className={`text-xs font-semibold ${game.result === 'W' ? 'text-green-400' : 'text-red-400'}`}>
                                        {game.result} {game.score}
                                    </div>
                                )}
                                {!isPast && game.time && (
                                    <div className="text-xs text-gray-400">{game.time} ‚Ä¢ {game.tv}</div>
                                )}
                            </div>
                        </div>
                        <div className="text-right">
                            {isPast && game.pts !== undefined ? (
                                game.note ? (
                                    <div className="text-yellow-400 text-xs font-medium bg-yellow-900/20 px-2 py-1 rounded">{game.note}</div>
                                ) : (
                                    <>
                                        <div className="text-2xl font-bold text-[#e03a3e]">{game.pts}</div>
                                        <div className="text-xs text-gray-400">{game.reb}R ‚Ä¢ {game.ast}A</div>
                                    </>
                                )
                            ) : (
                                <div className="bg-[#e03a3e] text-white px-3 py-1.5 rounded-full text-xs font-bold">UPCOMING</div>
                            )}
                        </div>
                    </div>
                </div>
            );

            const renderHome = () => (
                <div className="slide-in pb-24">
                    <div className="bg-gradient-to-br from-[#e03a3e] via-[#b82f33] to-[#8b1f23] p-6 rounded-b-3xl mb-4 shadow-2xl">
                        <div className="flex items-center gap-4 mb-3">
                            <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg">
                                <span className="text-4xl font-black text-[#e03a3e]">{data.number}</span>
                            </div>
                            <div className="flex-1">
                                <h1 className="text-3xl font-black mb-1 text-white drop-shadow-lg">{data.name}</h1>
                                <div className="text-white/90 text-sm font-medium">{data.teamFull}</div>
                                <div className="flex items-center gap-2 mt-2">
                                    <span className="badge text-yellow-300 text-xl drop-shadow">‚≠ê</span>
                                    <span className="text-xs font-bold text-white bg-white/20 px-2 py-0.5 rounded-full">2026 ALL-STAR</span>
                                </div>
                            </div>
                        </div>
                        <div className="text-center bg-white/10 rounded-xl p-2 backdrop-blur-sm">
                            <div className="text-xs text-white/80 font-semibold">
                                {error ? '‚ö†Ô∏è ' + error : 'üî¥ LIVE DATA'}
                            </div>
                            <div className="text-xs text-white/90">{lastUpdate.current.toLocaleString()}</div>
                        </div>
                    </div>

                    <div className="px-4 mb-6">
                        <h2 className="text-xl font-bold mb-3 flex items-center gap-2">
                            <span>üìä</span> 2025-26 Season (LIVE)
                        </h2>
                        <div className="grid grid-cols-3 gap-3 mb-3">
                            <StatCard label="PPG" value={data.seasonAvg.ppg} />
                            <StatCard label="RPG" value={data.seasonAvg.rpg} />
                            <StatCard label="APG" value={data.seasonAvg.apg} />
                        </div>
                        <div className="grid grid-cols-3 gap-3">
                            <StatCard label="FG%" value={`${data.seasonAvg.fg}%`} />
                            <StatCard label="3P%" value={`${data.seasonAvg.tpt}%`} />
                            <StatCard label="FT%" value={`${data.seasonAvg.ft}%`} />
                        </div>
                    </div>

                    {data.lastGame && (
                        <div className="px-4 mb-6">
                            <h2 className="text-xl font-bold mb-3 flex items-center gap-2">
                                <span>üî•</span> Last Game
                            </h2>
                            <div className="glass-card rounded-2xl p-6 shadow-xl">
                                <div className="flex justify-between items-start mb-5">
                                    <div>
                                        <div className="text-sm text-gray-400 mb-1">{data.lastGame.date}</div>
                                        <div className="text-2xl font-bold mb-1">vs {data.lastGame.opponent}</div>
                                        <div className="flex items-center gap-2">
                                            <div className="text-green-400 font-bold text-lg">
                                                {data.lastGame.result} {data.lastGame.score}
                                            </div>
                                            <div className="bg-green-500/20 text-green-400 px-2 py-0.5 rounded text-xs font-bold">WIN</div>
                                        </div>
                                    </div>
                                </div>
                                <div className="grid grid-cols-5 gap-2 text-center mb-4">
                                    <div>
                                        <div className="text-3xl font-bold text-[#e03a3e]">{data.lastGame.pts}</div>
                                        <div className="text-xs text-gray-400 font-semibold">PTS</div>
                                    </div>
                                    <div>
                                        <div className="text-3xl font-bold text-[#e03a3e]">{data.lastGame.reb}</div>
                                        <div className="text-xs text-gray-400 font-semibold">REB</div>
                                    </div>
                                    <div>
                                        <div className="text-3xl font-bold text-[#e03a3e]">{data.lastGame.ast}</div>
                                        <div className="text-xs text-gray-400 font-semibold">AST</div>
                                    </div>
                                    <div>
                                        <div className="text-3xl font-bold text-[#e03a3e]">{data.lastGame.stl}</div>
        
